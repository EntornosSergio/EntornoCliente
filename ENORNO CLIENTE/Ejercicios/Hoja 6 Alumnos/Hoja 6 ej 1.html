<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style>
        span {
            display:none;
        }
		legend {color: #CC0033;
                font-weight: 600;
		}
        
        #precio {color: #222;
                font-weight: 600;
                line-height: 1.3;
                }
    </style>
 <script>
	function validar(){
     }

	 function cambiarColor(e){ 
		e.style.background = "beige";
	 }

	 function validarNomApel(e){ 
		let renombre = /^[a-z]{2,}[a-z\s]*$/i;
	 		if(!renombre.test(e.value)){
				alert ("Rellene el campo convenientemente");
				e.focus();
				return false;
			} 
		e.style.backgroundColor = "white";
		return true;
	 }
	 
	 function validarFecha(e){ 
		let refecha = /^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/;
		let fechaHoy = new Date();
		let fecha = new Date(e.value);

	 	if(!refecha.test(e.value)){
			alert("Rellene bien el campo convenientemente");
			e.focus();
			return false;
	 	} else if (fecha > fechaHoy) {
			alert("La fecha es mayor a la del sistema");
			return false;
		e.style.backgroundColor = "white";
		calcularEdad(e);  
	 	return true;
	 }
	}

	 function calcularEdad(e){ 
		let fecha = new Date(e.value);
		let fechaHoy = new Date();	

		let años = fechaHoy.getFullYear() - fecha.getFullYear();

		let mes = fechaHoy.getMonth() - fecha.getMonth();
		if (mes < 0 || (mes === 0 && fechaHoy.getDate() < fecha.getDate())) {
			años--;
		}

		document.getElementById("edad").value = años;
		if (años < 18 || años > 65){
			alert("Edad menor a 18 o mayor a 65");
			return false;
		}
		return años;
	}

	 function validarDNI(e){ 
		let recarnet = /^\d{6,8}[A-Z]$/;
		if (!recarnet.test(e.value)){
		alert("Rellene bien el campo bien");
			e.focus();
			return false;
	 } 
	 	return true;
	}

	 function calcularRenovar(e){ 
	
	 }
 </script>
    </head>
 <body>
<h1>CLUB DEL AUTOMOVIL</h1>
<h3>ALTA NUEVO SOCIO</h3>
<form>
<div>
    <fieldset>
	<legend>DATOS SOCIO</legend>

	Nombre &nbsp;&nbsp;<input type="text" id="nom"size="30"
     	onfocus="cambiarColor(this,'beige')"
		onchange="validarNomApel(this)">
	<br><br>Apellidos <input type="text" id="ape"size="30"
		onfocus="cambiarColor(this,'beige')" 
		onchange="validarNomApel(this)">
	<br><br>Fecha Nacimiento  <input type="text" id="fecnac" size="13" placeholder="aaaa-mm-dd"
		onfocus="cambiarColor(this,'beige')"
		onchange="validarFecha(this)">&nbsp;&nbsp; 
	Edad <input type="text" size="4" id="edad" onfocus="cambiarColor(this,'beige')" readonly>
	</fieldset>
	 <br>
	<fieldset>
    <legend>DATOS CARNET CONDUCIR </legend>
    Num Carnet <input type="text" id="carnet" size="15"
	onfocus="cambiarColor(this,'beige')" onchange="validarDNI(this)">&nbsp;&nbsp;
Desde <input type="text" size="13" id="desde" placeholder="aaaa-mm-dd"
	onfocus="cambiarColor(this,'beige')"
	onchange="validarFecha(this)"> &nbsp;&nbsp;  
Renovar <input type="text" size="13" id="renovar" onfocus="cambiarColor(this,'beige')" readonly>  
<input type="button" value="CONTRATAR" onclick="validar()">  
</div>
</form> 
<br>
<div id="todoOK"></div>
</body>
</html>
